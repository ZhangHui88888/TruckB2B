name = "xk-truck-api"
main = "src/index.js"
compatibility_date = "2024-01-01"

# 环境变量（敏感信息通过 wrangler secret 设置）
[vars]
CORS_ORIGIN = "https://xk-truck.cn"

# 生产环境
[env.production]
vars = { CORS_ORIGIN = "https://xk-truck.cn" }

# 开发环境
[env.development]
vars = { CORS_ORIGIN = "*" }

# Vectorize 向量数据库绑定
[[vectorize]]
binding = "VECTORIZE"
index_name = "xktruck-knowledge"

# 需要通过 wrangler secret put 设置的密钥：
# - SUPABASE_URL
# - SUPABASE_SERVICE_KEY
# - DEEPSEEK_API_KEY          # 同时用于 Chat 和 Embedding
# - RESEND_API_KEY
# - NOTIFY_EMAIL
#
# WhatsApp Business API 密钥（待配置）：
# - WHATSAPP_PHONE_NUMBER_ID   # Meta 商业账号电话号码 ID
# - WHATSAPP_ACCESS_TOKEN      # Meta Graph API 访问令牌
# - WHATSAPP_VERIFY_TOKEN      # Webhook 验证令牌（自定义字符串，如：xktruck_webhook_2024）
